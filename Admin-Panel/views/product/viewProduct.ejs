<%- include('../layouts/header') %>

<div class="flex-1 flex flex-col h-screen md:ml-64 main-content transition-all duration-300">
    <div class="bg-white h-16 border-b border-slate-200 flex items-center justify-between px-6 sticky top-0 z-10">
        <h2 class="text-lg font-bold text-slate-800">Product List</h2>
        <a href="/product/addProduct" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center shadow-sm">
            <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Add Product
        </a>
    </div>

    <main class="flex-1 overflow-y-auto p-6 bg-slate-50">
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold">
                            <th class="px-6 py-4">Image</th>
                            <th class="px-6 py-4">Product Name</th>
                            <th class="px-6 py-4">Category</th>
                            <th class="px-6 py-4">Price</th>
                            <th class="px-6 py-4 text-center">Status</th>
                            <th class="px-6 py-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100 text-sm">
                        <% if (products && products.length > 0) { %>
                            <% products.map((item) => { %>
                                <tr class="hover:bg-slate-50 transition group">
                                    <td class="px-6 py-3">
                                        <img src="<%= item.product_image %>" class="w-12 h-12 rounded-lg object-cover border border-slate-200">
                                    </td>
                                    <td class="px-6 py-3 font-medium text-slate-800"><%= item.product_name %></td>
                                    <td class="px-6 py-3 text-slate-500">
                                        <span class="px-2.5 py-1 rounded-full bg-slate-100 text-slate-600 text-xs font-semibold">
                                            <%= item.categoryId ? item.categoryId.cat_name : 'No Category' %>
                                        </span>
                                    </td>
                                    <td class="px-6 py-3 font-semibold text-slate-700">$<%= item.price %></td>
                                    <td class="px-6 py-3 text-center">
                                        <% if (item.status == 1) { %>
                                            <span class="text-green-600 bg-green-50 px-2 py-1 rounded text-xs font-bold">Active</span>
                                        <% } else { %>
                                            <span class="text-red-600 bg-red-50 px-2 py-1 rounded text-xs font-bold">Inactive</span>
                                        <% } %>
                                    </td>
                                    <td class="px-6 py-3 text-right">
                                        <a href="/product/deleteProduct/<%= item._id %>" onclick="return confirm('Delete?')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition inline-flex">
                                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                                        </a>
                                    </td>
                                </tr>
                            <% }) %>
                        <% } else { %>
                            <tr><td colspan="6" class="text-center py-10 text-slate-400">No products found.</td></tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>
<%- include('../layouts/footer') %>